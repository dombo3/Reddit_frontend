(()=>{"use strict";!async function(){const t=document.querySelector("main.posts"),e=document.querySelector(".submit"),n=await async function(){return await fetch("http://localhost:3000/posts").then((t=>t.json()))}();n.map((t=>function(t){const e=document.createElement("article");e.setAttribute("class","post"),e.setAttribute("data-id",t.id);const n=document.createElement("div");n.setAttribute("class","vote-box");const o=document.createElement("img");o.src="img/upvote.png",o.classList.add("upvote");const c=document.createElement("p");c.setAttribute("class","vote"),c.textContent=t.score;const s=document.createElement("img");s.setAttribute("src","img/downvote.png"),s.setAttribute("class","downvote");const a=document.createElement("div");a.setAttribute("class","content-box");const i=document.createElement("h3");i.setAttribute("class","post-title"),i.textContent=t.title;const r=document.createElement("p");r.setAttribute("class","info");const d=function(t){const e=new Date(t),n=new Date-e;return Math.round(n/1e3/60/60/24)}(t.timestamp);r.textContent=`submitted ${d} days ago by ${t.author||"anonymus"}`;const l=document.createElement("a");l.setAttribute("class","link"),l.setAttribute("href","#"),l.textContent="modify";const u=document.createElement("a");return u.setAttribute("class","link"),u.setAttribute("href","#"),u.textContent="remove",n.appendChild(o),n.appendChild(c),n.appendChild(s),a.appendChild(i),a.appendChild(r),a.appendChild(l),a.appendChild(u),e.appendChild(n),e.appendChild(a),e}(t))).forEach((e=>t.appendChild(e))),function(t){t.forEach((t=>{const e=document.querySelector(`article[data-id="${t.id}"]`);e.querySelector(".upvote").addEventListener("click",(n=>{(async function(t){return await fetch(`http://localhost:3000/posts/${t}/upvote`,{method:"PUT"}).then((t=>t.json()))})(t.id).then((t=>{e.querySelector(".vote").innerText=t.score}))})),e.querySelector(".downvote").addEventListener("click",(n=>{(async function(t){return await fetch(`http://localhost:3000/posts/${t}/downvote`,{method:"PUT"}).then((t=>t.json()))})(t.id).then((t=>e.querySelector(".vote").innerText=t.score))}))}))}(n),e.onclick=t=>{t.preventDefault(),location.href="http://localhost:5500/dist/submit.html"}}()})();