(()=>{"use strict";var e={648:(e,t,o)=>{o.d(t,{Z:()=>r});var n=o(182);const r={auth:function(){localStorage.getItem("Username")||(location.href=n.J+"/dist/login.html")},login:function(e){localStorage.setItem("Username",e)},getUser:function(){return localStorage.getItem("Username")}}},182:(e,t,o)=>{o.d(t,{T:()=>n,J:()=>r});const n="http://localhost:3000",r="http://localhost:5500"}},t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={exports:{}};return e[n](r,r.exports,o),r.exports}o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=o(182);function t(e){const t=document.createElement("div");t.classList.add("error");const o=document.createElement("p"),n=document.createTextNode(`Error: ${e}`);o.appendChild(n),t.appendChild(o),document.querySelector("body").appendChild(t),setTimeout((()=>{t.remove()}),5e3)}function n(e,t){this.title=e,this.url=t||""}var r=o(648);const c=document.querySelector(".subtitle"),i=document.querySelector("#title"),s=document.querySelector("#url"),a=document.querySelector("#button-post-submit");let l={edit:!1};const u=function(){const e={};return location.search&&location.search.substr(1).split("&").reduce(((e,t)=>{const[o,n]=t.split("=");return e[o]=decodeURIComponent(n),e}),e),e}();u.id&&(l.edit=!0),async function(){let o={};var d,h;l.edit&&(c.innerText="EDIT POST",o=await(d=u.id,h=r.Z.getUser(),fetch(e.T+`/posts/${d}`,{headers:{Username:h}}).then((e=>{if(e.ok)return e.json();throw new Error("error in get request")}))).catch((t=>{console.log("GOT IT"),location.href=e.J+"/dist/index.html"})),i.value=o.title,s.value=o.url),function(o){a.onclick=async c=>{if(c.preventDefault(),i.focus(),document.forms[0].checkValidity()){let c;l.edit?(o.title=i.value,o.url=i.url,c=await function(o,n){return fetch(e.T+`/posts/${o.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Username:n},body:JSON.stringify(o)}).then((e=>{if(e.ok)return e.json()})).catch((e=>t(e)))}(o,r.Z.getUser())):c=await function(o,n){return fetch(e.T+"/posts",{method:"POST",headers:{"Content-Type":"application/json",Username:n},body:JSON.stringify(o)}).then((e=>{if(e.ok)return e.json()})).catch((e=>t(e)))}(new n(i.value,s.value),r.Z.getUser()),c&&(location.href=e.J+"/dist/index.html")}}}(o)}()})()})();