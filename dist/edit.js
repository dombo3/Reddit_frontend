(()=>{"use strict";function t(t){const e=document.createElement("div");e.classList.add("error");const o=document.createElement("p"),n=document.createTextNode(`Error: ${t}`);o.appendChild(n),e.appendChild(o),document.querySelector("body").appendChild(e),setTimeout((()=>{e.remove()}),5e3)}function e(t,e){this.title=t,this.ulr=e||""}const o=document.querySelector(".subtitle"),n=document.querySelector("#title"),c=document.querySelector("#url"),i=document.querySelector("#button-post-submit");let l={edit:!1};const r=function(){const t={};return location.search&&location.search.substr(1).split("&").reduce(((t,e)=>{const[o,n]=e.split("=");return t[o]=decodeURIComponent(n),t}),t),t}();r.id&&(l.edit=!0),async function(){let s={};var u;l.edit&&(o.innerText="EDIT POST",s=await(u=r.id,fetch(`http://localhost:3000/posts/${u}`).then((t=>t.json())).catch((e=>t(e)))),n.value=s.title,c.value=s.url),function(o){i.onclick=async i=>{if(i.preventDefault(),n.focus(),document.forms[0].checkValidity()){let i;l.edit?(o.title=n.value,o.url=n.url,i=await function(e){return fetch(`http://localhost:3000/posts/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((t=>t.json())).catch((e=>t(e)))}(o)):i=await function(e){return fetch("http://localhost:3000/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((t=>t.json())).catch((e=>t(e)))}(new e(n.value,c.value)),i&&(location.href="http://localhost:5500/dist/index.html")}}}(s)}()})();